let express,Book,apiRouter;_fc3‍.w("express",[["default",["express"],function(v){express=v}]]);_fc3‍.w("./db",[["Book",["Book"],function(v){Book=v}]]);_fc3‍.w("./routes/api",[["default",["apiRouter"],function(v){apiRouter=v}]]);




const app = express();
const port = process.env.PORT || 3000;

app.use(express.json());
app.use(express.urlencoded({ extended: true }));

app.use('/api', apiRouter);

app.get('/api/index', (req,res) => {
    res.send('welcome to my super api!!!');
});

app.post('/api/buy/:bookId', async (req, res) => {
    _fc3‍.g.console.log(req.params);
    try{
        const book = await Book.buyBook(req.params.bookId, req.userId);
        res.json({msg: 'successfully buyed!', ...book});
    } catch(error){
        res.json({error: 'Error buying your book!'});
    }
});

app.listen(port, ()=> {
    console.log('server running!')
});